package myprojects;

import static org.testng.Assert.assertEquals;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.interactions.Actions;
import org.testng.Assert;

//scenario
/*
go to amazon web page
verify title of webpage
search product with specific data
how many products on search result
navigate on first result and go to the product page
verify title of item
how many customer reviw
price of product
add product on card
go to login page and insert email address/should display error message 
create acount and insert data
verify expected alert 
*/

public class amazon {

	public static void main(String[] args) throws InterruptedException {
		// TODO Auto-generated method stub

		// Chrome
		System.setProperty("webdriver.chrome.driver",
				"C:/Users/marin/Documents/test/chromedriver_win32/chromedriver.exe");
		WebDriver driver = new ChromeDriver();

		// Firefox
		// System.setProperty("webdriver.gecko.driver",
		// "C:/Users/marin/Documents/test/geckodriver");
		// WebDriver driver1 = new FirefoxDriver();

		// Microsoft Edge
		// System.setProperty("webdriver.edge.driver",
		// "C:/Users/marin/Documents/test/msedgedriver");
		// WebDriver driver2 = new EdgeDriver();

		driver.get("https://www.amazon.com/");

		// verify title of webpage
		if (driver.getTitle().equalsIgnoreCase("Amazon.com. Spend less. Smile more."))
			// Pass
			System.out.println("Page title contains expected text ");
		else
			// Fail
			System.out.println("Page title doesn't contains expected text");

		// search product
		driver.findElement(By.id("twotabsearchtextbox")).sendKeys("Monobeach Princess Tent Girls");
		driver.findElement(By.id("nav-search-submit-button")).submit();
		Thread.sleep(1000);

		// How many products on search result
		WebElement searchdriver = driver
				.findElement(By.cssSelector(".s-main-slot.s-result-list.s-search-results.sg-row"));
		System.out.println(searchdriver.findElements(By.linkText(
				"Monobeach Princess Tent Girls Large Playhouse Kids Castle Play Tent with Star Lights Toy for Children Indoor and Outdoor Games, 55'' x 53'' (DxH) : Toys & Games"))
				.size());

		// navigate on first result and go to the product page
		driver.findElement(By.xpath("//span[@class='a-size-base-plus a-color-base a-text-normal']")).click();

		// Verify item title on page
		// System.out.println("Page title is : " + driver.getTitle());
		// assertTrue(driver.getTitle().contains(""Amazon.com: Monobeach Princess Tent
		// Girls Large Playhouse Kids Castle Play Tent with Star Lights Toy for Children
		// Indoor and Outdoor Games, 55'' x 53'' (DxH) : Toys & Games""));

		String actualTitle = driver.getTitle();
		String expectedTitle = "Amazon.com: Monobeach Princess Tent Girls Large Playhouse Kids Castle Play Tent with Star Lights Toy for Children Indoor and Outdoor Games, 55'' x 53'' (DxH) : Toys & Games";
		assertEquals(expectedTitle, actualTitle);
		System.out.println("Page title is : " + actualTitle);

		// how many customer reviw
		System.out.print(driver.findElement(By.id("acrCustomerReviewText")).getText());

		// price
		System.out.print(driver.findElement(By.cssSelector(".a-price-whole")).getText());

		// add product on card
		driver.findElement(By.id("add-to-cart-button")).click();
		Thread.sleep(1000);

		// refresh page
		driver.navigate().refresh();

		// go to the login page and insert the email
		driver.findElement(By.id("nav-link-accountList-nav-line-1")).click();
		driver.findElement(By.id("ap_email")).sendKeys("123456789@test.ru");
		driver.findElement(By.id("continue")).click();

		// should display error message
		String expectedHeading = "We cannot find an account with that email address";
		String heading = driver.findElement(By.cssSelector("#auth-error-message-box > div > div > ul")).getText();
		if (expectedHeading.equalsIgnoreCase(heading))
			System.out.println("The expected heading is same as actual heading --- " + heading);
		else
			System.out.println("The expected heading doesn't match the actual heading --- " + heading);

		// Actions a= Actions(driver);
		// WebElement
		// move=driver.findElement(By.cssSelector("#createAccountSubmit")).click();

		// create new account
		driver.findElement(By.id("createAccountSubmit")).click();
		String name = "Rina";
		String email = "test@test.com";
		String password = "test12";
		String re_enter_password = "test123";

		driver.findElement(By.id("ap_customer_name")).sendKeys(name);
		driver.findElement(By.id("ap_email")).sendKeys(email);
		driver.findElement(By.id("ap_password")).sendKeys(password);
		driver.findElement(By.id("ap_password_check")).sendKeys(re_enter_password);

		// verify expected alert
		Boolean Display = driver.findElement(By.id("auth-email-invalid-claim-alert")).isDisplayed();
		driver.findElement(By.id("auth-password-mismatch-alert")).isDisplayed();
		System.out.println("Element displayed is :" + Display);

	}

}
